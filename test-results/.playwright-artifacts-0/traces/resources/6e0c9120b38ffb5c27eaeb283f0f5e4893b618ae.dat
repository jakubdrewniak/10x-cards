import{j as s}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.DmM0KDA7.js";import{B as d}from"./button.C59U5J4T.js";import{u as a}from"./userStore.D7luLv8Q.js";function b({initialUser:r}){const u=a(e=>e.user),o=a(e=>e.setUser),p=a(e=>e.clearUser),[n,i]=t.useState(null),[l,c]=t.useState(!1);t.useEffect(()=>{r&&o(r)},[r,o]);const f=async()=>{try{c(!0),i(null);const e=await fetch("/api/auth/logout",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok){const m=await e.json();throw new Error(m.error||"Wystąpił błąd podczas wylogowywania")}p(),window.location.href="/login"}catch(e){i(e instanceof Error?e.message:"Wystąpił nieznany błąd"),console.error("Błąd wylogowania:",e)}finally{c(!1)}};return s.jsx("div",{className:"w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:s.jsxs("div",{className:"container flex h-14 items-center justify-between",children:[s.jsx("div",{className:"flex gap-6 md:gap-10",children:s.jsx("a",{href:"/",className:"flex items-center space-x-2",children:s.jsx("span",{className:"font-bold",children:"10x Cards"})})}),s.jsxs("div",{className:"flex items-center gap-4 relative",children:[n&&s.jsx("span",{className:"text-sm text-destructive absolute -bottom-8 right-0",children:n}),u?s.jsx(d,{variant:"outline",onClick:f,disabled:l,children:l?"Wylogowywanie...":"Wyloguj"}):s.jsx(d,{variant:"outline",asChild:!0,children:s.jsx("a",{href:"/login",children:"Zaloguj się"})})]})]})})}export{b as TopBar};
